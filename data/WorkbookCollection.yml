workbooks:
  - workbook_title: metadata
    workbook:
      - table: patient
        column_references:
          - name: patient_id
            charset: url_safe
            attributes:
              - essential
              - unique
            relation:
              - [ "TABLE_KEY", "patient", "patient_sample", "patient_id" ]
          - name: sex
            attributes:
              - essential
            categories:
              - male
              - female
              - not collected
              - not provided
          - name: history
            charset: free_text
          - name: ethnicity
          - name: ethnicity_assessment_method
            categories:
              - self-assessed
              - genetic
          - name: initial_diagnosis
            charset: free_text
      - table: patient_sample
        column_references:
          - name: patient_id
            charset: url_safe
            attributes:
              - essential
            relation:
              - [ "TABLE_KEY", "patient_sample", "patient", "patient_id" ]
              - [ "ONE_TO_MANY", "patient_sample", "patient_sample", "sample_id" ]
          - name: sample_id
            charset: url_safe
            attributes:
              - essential
              - unique
            relation:
              - [ "ONE_TO_ONE", "patient_sample", "patient_sample", "model_id" ]
          - name: collection_date
            charset: COLLECTION_DATE
          - name: collection_event
            charset: COLLECTION_EVENT
          - name: months_since_collection_1
            charset: NUMERIC
          - name: age_in_years_at_collection
            charset: NUMERIC
          - name: diagnosis
            attributes:
              - essential
          - name: tumour_type
            attributes:
              - essential
            categories:
              - primary
              - metastatic
              - recurrent
              - refractory
          - name: primary_site
            attributes:
              - essential
            charset: free_text
          - name: collection_site
            attributes:
              - essential
            charset: free_text
          - name: stage
            charset: free_text
          - name: staging_system
            charset: free_text
          - name: grade
            charset: free_text
          - name: grading_system
            charset: free_text
          - name: virology_status
            charset: free_text
          - name: sharable
            attributes:
              - essential
            categories:
              - yes
              - no
              - not provided
          - name: treatment_naive_at_collection
            attributes:
              - essential
            categories:
              - treatment naive
              - not treatment naive
              - not collected
              - not provided
          - name: treated
            categories:
              - yes
              - no
              - not provided
              - not collected
          - name: prior_treatment
            categories:
              - yes
              - no
              - not collected
              - not provided
          - name: model_id
            charset: url_safe
            attributes:
              - essential
              - unique
            relation:
              - [ "TABLE_KEY", "patient_sample", "model", "model_id" ]
              - [ "TABLE_KEY", "patient_sample", "model_validation", "model_id" ]
              - [ "TABLE_KEY", "patient_sample","sharing", "model_id" ]
      - table: pdx_models
        column_references:
          - name: model_id
            attributes:
              - essential
              - unique
            relation:
              - [ "TABLE_KEY", "pdx_models", "sample", "model_id" ]
          - name: host_strain_name
            charset: free_text
            attributes:
              - essential
          - name: host_strain_nomenclature
            charset: free_text
            attributes:
              - essential
          - name: engraftment_site
            charset: free_text
            attributes:
              - essential
          - name: engraftment_type
            attributes:
              - essential
            categories:
              - heterotopic
              - orthotopic
              - not collected
              - not provided
          - name: sample_type
            charset: free_text
            attributes:
              - essential
          - name: sample_state
            charset: free_text
          - name: passage_number
            attributes:
              - essential
            charset: numeric
          - name: publications
            charset: pmid_format
      - table: model_validation
        column_references:
          - name: model_id
            attributes:
              - essential
              - unique
            relation:
              - [ "TABLE_KEY", "model_validation" , "sample", "model_id" ]
          - name: validation_technique
            charset: free_text
          - name: description
            attributes:
              - essential
            charset: free_text
          - name: passages_tested
            attributes:
              - essential
            charset: numeric
          - name: validation_host_strain_nomenclature
            attributes:
              - essential
            charset: free_text
      - table: sharing
        column_references:
          - name: model_id
            attributes:
              - essential
              - unique
            relation:
              - [ "TABLE_KEY", "sharing", "patient_sample", "model_id" ]
          - name: provider_type
            attributes:
              - essential
            categories:
              - academia
              - industry
          - name: accessibility
            attributes:
              - essential
            charset: free_text
          - name: europdx_access_modality
            attributes:
              - essential
            categories:
              - transnational access
              - collaboration only
          - name: email
            attributes:
              - essential
          - name: name
            attributes:
              - essential
          - name: form_url
          - name: database_url

  - workbook_title: molecular_metadata
    workbook:
      - table: sample
        column_references:
          - name: model_id
            attributes:
              - essential
            charset: url_safe
          - name: sample_id
            attributes:
              - essential
            charset: url_safe
          - name: sample_origin
            attributes:
              - essential
            categories:
              - xenograft
              - patient
          - name: passage
            charset: NUMERIC
          - name: host_strain_name
            charset: free_text
          - name: host_strain_nomenclature
            charset: free_text
          - name: engrafted_tumor_collection_site
            charset: free_text
          - name: raw_data_url
            charset: free_text
          - name: platform_id
            charset: url_safe
            relation:
              - [ "TABLE_KEY", "sample", "platform", "platform_id" ]
              - [ "TABLE_KEY", "sample", "web-platform", "platform_id" ]
      - table: platform
        column_references:
          - name: platform_id
            charset: url_safe
            attributes:
              - essential
              - unique
            relation:
              - [ "TABLE_KEY", "platform", "sample", "platform_id" ]
              - [ "TABLE_KEY", "platform", "web-platform", "platform_id" ]
          - name: molecular_characterisation_type
            attributes:
              - essential
            categories:
              - copy number alteration
              - expression
              - mutation
              - drug dosing
              - cytogenetic
          - name: instrument_model
            attributes:
              - essential
            charset: free_text
          - name: library_strategy
            attributes:
              - essential
            charset: free_text
          - name: library_selection
            charset: free_text
          - name: library_notes
            charset: free_text
          - name: genome_assembly
            charset: free_text
      - table: platform_web
        column_references:
          - name: platform_id
            charset: url_safe
            attributes:
              - essential
              - unique
            relation:
              - [ "TABLE_KEY", "platform_web", "sample", "platform_id" ]
              - [ "TABLE_KEY", "platform_web", "web-platform", "platform_id" ]
          - name: molecular_methods_description
            charset: free_text
          - name: analysis_description
            charset: free_text
          - name: table
            charset: free_text